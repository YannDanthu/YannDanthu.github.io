<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>IP GeoLocation with AngularJS - Yann&#x27;s blog</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="IP GeoLocation with AngularJS">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="IP GeoLocation with AngularJS">
    <meta property="og:description" content="">

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link rel="stylesheet" type="text/css" href="//YannDanthu.github.io/themes/uno/assets/css/uno.css?v=1479915546986" />

    <link rel="canonical" href="https://YannDanthu.github.io/2014/05/19/I-P-Geo-Location-with-Angular-J-S.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Yann&#x27;s blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="IP GeoLocation with AngularJS" />
    <meta property="og:description" content="Your web site is available in different language and you want to select the one matching the client location. To be accurate we need to locate the client IP to retrieve the country it belongs to. How to do it fast and simple ? Let’s use an existing free IP" />
    <meta property="og:url" content="https://YannDanthu.github.io/2014/05/19/I-P-Geo-Location-with-Angular-J-S.html" />
    <meta property="article:tag" content="angular geoloc" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="IP GeoLocation with AngularJS" />
    <meta name="twitter:description" content="Your web site is available in different language and you want to select the one matching the client location. To be accurate we need to locate the client IP to retrieve the country it belongs to. How to do it fast and simple ? Let’s use an existing free IP" />
    <meta name="twitter:url" content="https://YannDanthu.github.io/2014/05/19/I-P-Geo-Location-with-Angular-J-S.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="Yann&#x27;s blog" href="https://YannDanthu.github.io/rss/" />

</head>
<body class="post-template tag-angular-geoloc no-js">

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    <header class="panel-cover panel-cover--collapsed " >
      <div class="panel-main">
    
        <div class="panel-main__inner panel-inverted">
        <div class="panel-main__content">
    
            <a href="https://YannDanthu.github.io" title="link to homepage for Yann&#x27;s blog"><img src="http://yann.danthu.com/moi-circle.png" width="80" alt="Yann&#x27;s blog logo" class="panel-cover__logo logo" /></a>
            <h1 class="panel-cover__title panel-title"><a href="https://YannDanthu.github.io" title="link to homepage for Yann&#x27;s blog">Yann&#x27;s blog</a></h1>
            <hr class="panel-cover__divider" />
            <p class="panel-cover__description">This blog is mainly used as an FAQ and Tips reminder for myself ;-)</p>
            <hr class="panel-cover__divider panel-cover__divider--secondary" />
    
            <div class="navigation-wrapper">
    
              <nav class="cover-navigation cover-navigation--primary">
                <ul class="navigation">
                  <li class="navigation__item"><a href="https://YannDanthu.github.io/#blog" title="link to Yann&#x27;s blog blog" class="blog-button">Blog</a></li>
                </ul>
              </nav>
    
              
              
              <nav class="cover-navigation navigation--social">
                <ul class="navigation">
              
              
                  <!-- Twitter -->
                  <li class="navigation__item">
                    <a href="@YannDanthu" title="Twitter account">
                      <i class='icon icon-social-twitter'></i>
                      <span class="label">Twitter</span>
                    </a>
                  </li>
              
              
                  <!-- Github -->
                  <li class="navigation__item">
                    <a href="https://github.com/YannDanthu" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="navigation__item">
                    <a href="http://www.linkedin.com/in/ydanthu" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
              
                </ul>
              </nav>
              
    
            </div>
    
          </div>
    
        </div>
    
        <div class="panel-cover--overlay"></div>
      </div>
    </header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            

  <article class="post-container post-container--single">

    <header class="post-header">
      <div class="post-meta">
        <time datetime="19 May 2014" class="post-meta__date date">19 May 2014</time> &#8226; <span class="post-meta__tags tags">on <a href="https://YannDanthu.github.io/tag/angular-geoloc/">angular geoloc</a></span>
        <span class="post-meta__author author"><img src="https://avatars.githubusercontent.com/u/7732947?v&#x3D;3" alt="profile image for Yann Danthu" class="avatar post-meta__avatar" /> by Yann Danthu</span>
      </div>
      <h1 class="post-title">IP GeoLocation with AngularJS</h1>
    </header>

    <section class="post tag-angular-geoloc">
      <div class="paragraph">
<p>Your web site is available in different language and you want to select the one matching the client location.</p>
</div>
<div class="paragraph">
<p>To be accurate we need to locate the client IP to retrieve the country it belongs to.</p>
</div>
<div class="paragraph">
<p>How to do it fast and simple ? Let’s use an existing free IP lookup API that will locate the IP for us, and lets do the request with AngularJS :)</p>
</div>
<div class="paragraph">
<p>One of IP GeoLocation service available is <a href="http://ipinfo.io" class="bare">http://ipinfo.io</a>
Calling it with json uri (<a href="http://ipinfo.io/json" class="bare">http://ipinfo.io/json</a>) will return IP location information in json format. (you will get less but sufficient info with <a href="http://ipinfo.io/geo" class="bare">http://ipinfo.io/geo</a>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "ip": "8.8.8.8",
  "hostname": "google-public-dns-a.google.com",
  "loc": "37.385999999999996,-122.0838",
  "org": "AS15169 Google Inc.",
  "city": "Mountain View",
  "region": "California",
  "country": "US",
  "phone": 650
}</pre>
</div>
</div>
<div class="paragraph">
<p>Let’s do the request with AngulaJS and use the result.</p>
</div>
<div class="listingblock">
<div class="content">
<pre> function GetCountry($scope, $http) {
   $http.get('http://ipinfo.io/json').
     success(function(data) {
       $scope.location = data;
       $scope.country = 'fr';
       if (data.country != 'FR') $scope.country = "en";
   });
 }
 ----

So easy to handle json data with angular :)

The web page part:</pre>
</div>
</div>
<div class="paragraph">
<p>&lt;!DOCTYPE html&gt;
&lt;html ng-app&gt;
  &lt;head&gt;
    &lt;script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.3/angular.min.js"&gt;&lt;/script&gt;
    &lt;script&gt;
function GetCountry($scope, $http) {
   $http.get('http://ipinfo.io/json').
     success(function(data) {
       $scope.location = data;
       $scope.country = 'fr';
       if (data.country != 'FR') $scope.country = "en";
   });
 }
   &lt;/script&gt;
 &lt;/head&gt;
 &lt;body&gt;
 &lt;div ng-controller="GetCountry"&gt;Your country: {{country}}&lt;/div&gt;
 &lt;/body&gt;
&lt;/html&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>and that’s it.</pre>
</div>
</div>
    </section>

  </article>




            <footer class="footer">
                <span class="footer__copyright">&copy; 2016. All rights reserved.</span>
                <span class="footer__copyright"><a href="http://uno.daleanthony.com" title="link to page for Uno Ghost theme">Uno theme</a> by <a href="http://daleanthony.com" title="link to website for Dale-Anthony">Dale-Anthony</a></span>
                <span class="footer__copyright">Proudly published with <a href="http://hubpress.io" title="link to Hubpress website">Hubpress</a></span>
            </footer>
        </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>

    <script type="text/javascript" src="//YannDanthu.github.io/themes/uno/assets/js/main.js?v=1479915546986"></script>
    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-50478688-2', 'auto');
    ga('send', 'pageview');

    </script>

</body>
</html>
